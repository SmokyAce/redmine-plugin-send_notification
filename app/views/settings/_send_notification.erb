<% defaults = Redmine::Plugin::registered_plugins[:send_notification].settings[:default] %>
<% settings =  Setting.plugin_send_notification || {} %>
<% @settings = settings || defaults %>
<h3>
  <%= t('label_status_settings') %>
</h3>
<p>
  <% current_filter = @settings.fetch('issue_status_confirmed_id', 0) %>
  <label for="settings_issue_status_confirmed_id]">
    <%= t('label_issue_status_confirmed') %>
  </label>
  <%= select_tag 'settings[issue_status_confirmed_id]', options_from_collection_for_select(IssueStatus.sorted.to_a, 'id', 'name', current_filter) %>
</p>
<p>
  <% current_filter = @settings.fetch('issue_status_completed_id', 0) %>
  <label for="settings_issue_status_completed_id">
    <%= t('label_issue_status_completed') %>
  </label>
  <%= select_tag 'settings[issue_status_completed_id]', options_from_collection_for_select(IssueStatus.sorted.to_a, 'id', 'name', current_filter) %>
</p>
<p>
  <% current_filter = @settings.fetch('issue_status_in_work_id', 0) %>
  <label for="settings_issue_status_in_work_id">
    <%= t('label_issue_status_in_work') %>
  </label>
  <%= select_tag 'settings[issue_status_in_work_id]', options_from_collection_for_select(IssueStatus.sorted.to_a, 'id', 'name', current_filter) %>
</p>
<p>
  <% current_filter = @settings.fetch('issue_status_in_stop_id', 0) %>
  <label for="settings_issue_status_in_stop_id">
    <%= t('label_issue_status_in_stop') %>
  </label>
  <%= select_tag 'settings[issue_status_in_stop_id]', options_from_collection_for_select(IssueStatus.sorted.to_a, 'id', 'name', current_filter) %>
</p>